from flask import Flask, request, Response
from twilio.twiml.messaging_response import MessagingResponse

app = Flask(__name__)

@app.route("/whatsapp", methods=["POST"])
def whatsapp_reply():
    incoming_msg = request.form.get('Body').strip().lower()
    response = MessagingResponse()
    msg = response.message()

    if incoming_msg in ["hi", "ูุฑุญุจุง", "ุงูุณูุงู ุนูููู"]:
        msg.body("""๐ ุฃููุงู ูุณููุงู ุจู ูู ูุฑูุฒ ุงูุนูุงูุฉ ุงูุทุจู ุงูุชุฎุตุตู.
ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฎุฏูุฉ ุงูุชู ุชุฑูุฏูุง:
1๏ธโฃ ุญุฌุฒ ููุนุฏ
2๏ธโฃ ุงูุงุณุชูุณุงุฑ ุนู ุงูุนูุงุฏุงุช
3๏ธโฃ ูุนุฑูุฉ ููุงุนูุฏ ุงูุฏูุงู
4๏ธโฃ ุงูุชุญุฏุซ ูุน ููุธู

(ุงูุชุจ ุงูุฑูู ููุท ูููุชุงุจุนุฉ)""")
    elif incoming_msg == "1":
        msg.body("๐ ูุญุฌุฒ ููุนุฏุ ุงูุฑุฌุงุก ุฅุฑุณุงู:\n- ุงูุงุณู\n- ุฑูู ุงููุงุชู\n- ุงูุนูุงุฏุฉ ุงููุทููุจุฉ\n- ุงูุชุงุฑูุฎ ุงููุฑุบูุจ")
    elif incoming_msg == "2":
        msg.body("๐ฅ ุงูุนูุงุฏุงุช ุงููุชููุฑุฉ:\n- ุงูุจุงุทููุฉ\n- ุงูุฃุทูุงู\n- ุงูุฃุณูุงู\n- ุงูุฌูุฏูุฉ\n- ุงููุณุงุฆูุฉ\n- ุงูุนุธุงู")
    elif incoming_msg == "3":
        msg.body("๐ ุงูุฏูุงู ูู ุงูุฃุญุฏ ุฅูู ุงูุฎููุณุ ูู ุงูุณุงุนุฉ 8:00 ุตุจุงุญุงู ุญุชู 4:00 ูุณุงุกู.")
    elif incoming_msg == "4":
        msg.body("๐ ุณูุชู ุชุญูููู ุฅูู ููุธู ุงูุงุณุชูุจุงู... ุงูุฑุฌุงุก ุงูุงูุชุธุงุฑ.")
    else:
        msg.body("โ ูู ุฃููู ุฑุณุงูุชู. ุงูุชุจ 'ูุฑุญุจุง' ููุจุฏุก ูู ุฌุฏูุฏ.")

    return Response(str(response), mimetype="application/xml")

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
